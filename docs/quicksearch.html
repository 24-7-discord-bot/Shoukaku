<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"src_Constants.js.html":{"id":"src_Constants.js.html","title":"Source: src/Constants.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/Constants.js const { name, version, repository } = require('../package.json'); /** * Statics for some constants * @class Constants */ module.exports = { /** * State of nodes or links * @enum {number} * @memberof Constants */ state: { CONNECTING: 0, CONNECTED: 1, DISCONNECTING: 2, DISCONNECTED: 3 }, /** * Options that Shoukaku accepts upon initialization * @property {boolean} [resumable=false] If you want your node to support resuming * @property {number} [resumableTimeout=30] Timeout when Lavalink will decide a player isn't resumed and will destroy the connection to it, measured in seconds * @property {number} [reconnectTries=2] Amount of tries to connect to the lavalink Node before it decides that the node is unreconnectable * @property {boolean} [moveOnDisconnect=false] Specifies if the library will attempt to reconnect players on a disconnected node to another node * @property {number} [restTimeout=15000] Timeout on rest requests to your lavalink node, measured in milliseconds * @property {number} [reconnectInterval=5000] Timeout between reconnect attempts, measured in milliseconds * @property {number} [closedWebsocketEventDelay=500] Timeout before shoukaku processes a websocket closed event, measured in milliseconds * @property {string} [userAgent=\"{name}/{ver} ({url})\"] User-Agent to use on connecting to WS and REST request * @memberof Constants */ shoukakuOptions: { resumable: false, resumableTimeout: 30, reconnectTries: 2, moveOnDisconnect: false, restTimeout: 15000, reconnectInterval: 5000, closedWebsocketEventDelay: 500, userAgent: `${name}/${version} (${repository.url})` }, /** * Options that Shoukaku needs to initialize a lavalink node * @property {string} name Your Node Name, anything you want to name your node * @property {string} url Your node host:port combined, do not put any prefix in this property, ex: 'localhost:2048' * @property {string} auth The authentication key you set on your lavalink config * @property {?boolean} [secure=false] If you want to use https and wss instead of http and ws * @property {?string} [group=undefined] Group of this node, used for grouping specific nodes * @memberof Constants */ nodeOptions: { name: null, url: null, auth: null, secure: false, group: undefined } }; × Search results Close "},"src_guild_ShoukakuConnection.js.html":{"id":"src_guild_ShoukakuConnection.js.html","title":"Source: src/guild/ShoukakuConnection.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/guild/ShoukakuConnection.js const AbortController = require('abort-controller'); const { EventEmitter, once } = require('events'); const { state } = require('../Constants.js'); const { wait } = require('../Utils.js'); /** * ShoukakuConnection, manages a voice connection between Discord and Lavalink * @class ShoukakuConnection * @extends {EventEmitter} * @param {ShoukakuPlayer} player The player that initialized this manager * @param {ShoukakuSocket} node The node where this manager is connected to * @param {Guild} guild A Discord.JS guild structure */ class ShoukakuConnection extends EventEmitter { constructor(player, node, guild) { super(); /** * The player that initialized this manager * @type {ShoukakuPlayer} */ this.player = player; /** * The node where this manager is connected to * @type {ShoukakuSocket} */ this.node = node; /** * The ID of the guild where this connection is * @type {string} */ this.guildID = guild.id; /** * The ID of the channel where this connection is * @type {?string} */ this.channelID = null; /** * The ID of the shard where this connection is * @type {number} */ this.shardID = guild.shardID; /** * The ID of the current connection session * @type {?string} */ this.sessionID = null; /** * The region where this connection is * @type {?string} */ this.region = null; /** * If the client user is self muted * @type {boolean} */ this.muted = false; /** * If the client user is self deafened * @type {boolean} */ this.deafened = false; /** * The state of this connection * @type {Constants.state} */ this.state = state.DISCONNECTED; /** * If this connection detected a voice channel or voice server change * @type {boolean} */ this.moved = false; /** * If this connection is trying to force reconnect * @type {boolean} */ this.reconnecting = false; Object.defineProperty(this, 'serverUpdate', { value: null, writable: true }); Object.defineProperty(this, 'connectTimeout', { value: null, writable: true }); } /** * Attempts to reconnect this connection * @memberOf ShoukakuConnection * @param {Object} [options] * @param {String} [options.channelID] Will throw an error if not specified, when the state of this link is disconnected, no cached serverUpdate or when forceReconnect is true * @param {Boolean} [options.forceReconnect] Forces a reconnection by re-requesting a connection to Discord, also resets your player * @returns {Promise&lt;void&gt;} */ async attemptReconnect({ channelID, forceReconnect } = {}) { if (!forceReconnect &amp;&amp; this.state === state.CONNECTED) { this.node.send({ op: 'voiceUpdate', guildId: this.guildID, sessionId: this.sessionID, event: this.serverUpdate }); return; } else if (this.state === state.DISCONNECTED || !this.serverUpdate || forceReconnect) { try { this.reconnecting = true; if (!channelID) throw new Error('Please specify the channel you want this node to connect on'); this.node.send({ op: 'destroy', guildId: this.guildID }); await wait(4000); if (this.state !== state.DISCONNECTED) { this.send({ guild_id: this.guildID, channel_id: null, self_mute: false, self_deaf: false }, true); await wait(4000); } this.serverUpdate = null; await this.connect({ guildID: this.guildID, channelID, mute: this.selfMute, deaf: this.selfDeaf }); } finally { this.reconnecting = false; } } } /** * Deafens the client * @memberOf ShoukakuConnection * @param {boolean} [deaf=false] * @returns {void} */ setDeaf(deaf = false) { this.deafened = deaf; return this.send({ guild_id: this.guildID, channel_id: this.channelID, self_deaf: this.deafened, self_mute: this.muted }, true); } /** * Mutes the client * @memberOf ShoukakuConnection * @param {boolean} [mute=false] * @returns {void} */ setMute(mute = false) { this.muted = mute; return this.send({ guild_id: this.guildID, channel_id: this.channelID, self_deaf: this.deafened, self_mute: this.muted }, true); } /** * Deafens the client * @memberOf ShoukakuConnection * @param {string} [channel=null] channel id of the channel to move to, null if you want to disconnect the client * @param {string} [reason] The reason for this action * @returns {Promise&lt;void&gt;} */ moveChannel(channel = null, reason) { return this .node .shoukaku .client .api .guilds(this.guildID) .members(this.node.shoukaku.id) .patch({ data: { channel }, reason }); } /** * Disconnects this connection * @memberOf ShoukakuConnection * @returns {void} */ disconnect() { if (this.state !== state.DISCONNECTED) { this.state = state.DISCONNECTING; this.send({ guild_id: this.guildID, channel_id: null, self_mute: false, self_deaf: false }, true); } this.node.players.delete(this.guildID); this.node.send({ op: 'destroy', guildId: this.guildID }); this.player.removeAllListeners(); this.player.reset(); this.state = state.DISCONNECTED; this.node.emit('debug', this.node.name, '[Voice] -&gt; [Node] [Discord] : Link &amp; Player Destroyed'); } /** * Connects this connection * @memberOf ShoukakuConnection * @param {Object} options options to connect * @returns {Promise&lt;void&gt;} * @protected */ async connect(options) { if (!options) throw new Error('No options supplied'); if (this.state === state.CONNECTING) throw Error('Can\\'t connect while a connection is connecting. Wait for it to resolve first'); this.state = state.CONNECTING; const { guildID, channelID, deaf, mute } = options; this.send({ guild_id: guildID, channel_id: channelID, self_deaf: deaf, self_mute: mute }, true); this.node.emit('debug', this.node.name, '[Voice] -&gt; [Discord] : Requesting Connection'); const signal = new AbortController(); const timeout = setTimeout(() =&gt; signal.abort(), 15000); try { await once(this, 'serverUpdate', { signal }); } catch (error) { this.node.emit('debug', this.node.name, '[Voice] &lt;/- [Discord] : Request Connection Failed'); if (error.name === 'AbortError') throw new Error('The voice connection is not established in 15 seconds'); throw error; } finally { clearTimeout(timeout); } } /** * @memberOf ShoukakuConnection * @param {Object} * @protected */ setStateUpdate({ session_id, channel_id, self_deaf, self_mute }) { this.moved = this.channelID &amp;&amp; this.channelID !== channel_id; this.deafened = self_deaf; this.muted = self_mute; this.sessionID = session_id; this.channelID = channel_id || this.channelID; if (!channel_id) this.state = state.DISCONNECTED; this.node.emit('debug', this.node.name, '[Voice] &lt;- [Discord] : State Update'); this.emit('stateUpdate'); } /** * @memberOf ShoukakuConnection * @param {Object} * @protected */ setServerUpdate(data) { if (!data.endpoint) return; clearTimeout(this.connectTimeout); this.moved = this.serverUpdate &amp;&amp; !data.endpoint.startsWith(this.region); this.region = data.endpoint.split('.').shift().replace(/[0-9]/g, ''); this.serverUpdate = data; this.node.send({ op: 'voiceUpdate', guildId: this.guildID, sessionId: this.sessionID, event: this.serverUpdate }); this.node.emit('debug', this.node.name, '[Voice] &lt;- [Discord] : Server Update'); this.emit('serverUpdate'); } /** * @memberOf ShoukakuConnection * @param {Object} d * @param {boolean} [important=false] * @protected */ send(d, important = false) { if (!this.node.shoukaku.client.guilds.cache.has(this.guildID)) return; this.node.shoukaku.client.ws.shards.get(this.shardID)?.send({ op: 4, d }, important); } } module.exports = ShoukakuConnection; × Search results Close "},"src_guild_ShoukakuPlayer.js.html":{"id":"src_guild_ShoukakuPlayer.js.html","title":"Source: src/guild/ShoukakuPlayer.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/guild/ShoukakuPlayer.js const EventEmitter = require('events'); const { state } = require('../Constants.js'); const { mergeDefault, wait } = require('../Utils.js'); const ShoukakuConnection = require('./ShoukakuConnection.js'); const ShoukakuTrack = require('../struct/ShoukakuTrack.js'); const ShoukakuFilter = require('../struct/ShoukakuFilter.js'); /** * ShoukakuPlayer, used to control the player on a guild * @class ShoukakuPlayer * @extends {EventEmitter} * @param {ShoukakuSocket} node The node where this class is initialized * @param {Guild} guild A Discord.JS guild structure */ class ShoukakuPlayer extends EventEmitter { constructor(node, guild) { super(); /** * The voice connection manager of this player * @type {ShoukakuConnection} */ this.connection = new ShoukakuConnection(this, node, guild); /** * The track that is currently being played by this player * @type {?string} */ this.track = null; /** * If this player is currently paused * @type {boolean} */ this.paused = false; /** * The current postion in of this player, in milliseconds * @type {number} */ this.position = 0; /** * The current filter settings for this player * @type {ShoukakuFilter} */ this.filters = new ShoukakuFilter(); } /** * Emitted when the lavalink player emits a 'TrackEndEvent' or 'TrackStuckEvent' * @event ShoukakuPlayer#end * @param {Object} reason * @memberOf ShoukakuPlayer */ /** * Emitted when the lavalink player emits a WebsocketClosedEvent * @event ShoukakuPlayer#closed * @param {Object} reason * @memberOf ShoukakuPlayer * @example * Player.on('closed', reason =&gt; console.log(reason) &amp;&amp; Player.disconnect()); */ /** * Emitted when this library encounters an internal error * @event ShoukakuPlayer#error * @param {Error} error The error encountered. * @memberOf ShoukakuPlayer * @example * Player.on('error', error =&gt; console.error(error) &amp;&amp; Player.disconnect()); */ /** * Emitted when the lavalink player emits a TrackStartEvent * @event ShoukakuPlayer#start * @param {Object} data * @memberOf ShoukakuPlayer */ /** * Emitted when the lavalink player emits a TrackExceptionEvent, automatically fires TrackEndEvent so handling this is optional * @event ShoukakuPlayer#exception * @param {Object} reason * @memberOf ShoukakuPlayer */ /** * Emitted when this library managed to resumed this player * @event ShoukakuPlayer#resumed * @memberOf ShoukakuPlayer */ /** * Emitted when the lavalink player emits a PlayerUpdate event * @event ShoukakuPlayer#update * @param {Object} data * @memberOf ShoukakuPlayer */ /** * Moves this player and connection to another node * @param {string} name Name of the Node you want to move to * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ moveNode(name) { const node = this.connection.node.shoukaku.nodes.get(name); if (!node || node.name === this.connection.node.name) return this; if (node.state !== state.CONNECTED) throw new Error('The node you specified is not ready'); this.connection.node.send({ op: 'destroy', guildId: this.connection.guildID }); this.connection.node.players.delete(this.guildID); this.connection.node = node; this.connection.node.players.set(this.guildID, this.player); this.connection.node.send({ op: 'voiceUpdate', guildId: this.connection.guildID, sessionId: this.connection.sessionID, event: this.connection.serverUpdate }); this.resume(); return this; } /** * Plays a track * @param {string|ShoukakuTrack} track The Base64 track from the Lavalink Rest API or a ShoukakuTrack * @param {Object} [options={}] Used if you want to put a custom track start or end time * @param {boolean} [options.noReplace=true] Specifies if the player will not replace the current track when executing this action * @param {boolean} [options.pause=false] If `true`, the player will pause when the track starts playing * @param {?number} [options.startTime=undefined] In milliseconds on when to start * @param {?number} [options.endTime=undefined] In milliseconds on when to end * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ playTrack(input, options = {}) { if (!input) throw new Error('No track given to play'); if (input instanceof ShoukakuTrack) input = input.track; options = mergeDefault({ noReplace: true, pause: false }, options); const payload = { op: 'play', guildId: this.connection.guildID, track: input, noReplace: options.noReplace, pause: options.pause }; if (options.startTime) payload.startTime = options.startTime; if (options.endTime) payload.endTime = options.endTime; this.connection.node.send(payload); this.track = input; this.paused = options.pause; this.position = 0; return this; } /** * Stops the player from playing * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ stopTrack() { this.position = 0; this.connection.node.send({ op: 'stop', guildId: this.connection.guildID }); return this; } /** * Pauses or unpauses the player from playing * @param {boolean} [pause=true] true to pause, false to unpause * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setPaused(pause = true) { this.connection.node.send({ op: 'pause', guildId: this.connection.guildID, pause }); this.paused = pause; return this; } /** * Seeks your player to the time you want * @param {number} position Time in milliseconds where you want to seek to * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ seekTo(position) { if (!Number.isInteger(position)) throw new Error('Please input a valid number for position'); this.connection.node.send({ op: 'seek', guildId: this.connection.guildID, position }); return this; } /** * Sets the playback volume of your lavalink player * @param {number} volume The new volume you want to set on the player * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setVolume(volume) { if (Number.isNaN(volume)) throw new Error('Please input a valid number for volume'); volume = Math.min(5, Math.max(0, volume)); this.filters.volume = volume; this.updateFilters(); return this; } /** * Sets the equalizer of your lavalink player * @param {Object[]} bands * @param {number} bands.band Band of the equalizer, can be 0 - 13 * @param {number} bands.gain Gain for this band of the equalizer * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setEqualizer(bands) { if (!bands || !Array.isArray(bands)) throw new Error('No bands, or the band you gave isn\\'t an array'); this.filters.equalizer = bands; this.updateFilters(); return this; } /** * Sets the karaoke effect of your lavalink player * @param {Object|null} values * @param {number} [values.level] Karaoke effect level * @param {number} [values.monoLevel] Karaoke effect monoLevel * @param {number} [values.filterBand] Karaoke effect filterband * @param {number} [values.filterWidth] Karaoke effect filterwidth * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setKaraoke(values) { this.filters.karaoke = values || null; this.updateFilters(); return this; } /** * Sets the timescale effect of your lavalink player * @param {Object|null} values * @param {number} [values.speed] Timescale effect speed * @param {number} [values.pitch] Timescale effect pitch * @param {number} [values.rate] Timescale effect rate * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setTimescale(values) { this.filters.timescale = values || null; this.updateFilters(); return this; } /** * Sets the tremolo effect of your lavalink player * @param {Object|null} values * @param {number} [values.frequency] Tremolo effect frequency * @param {number} [values.depth] Tremolo effect depth * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setTremolo(values) { this.filters.tremolo = values || null; this.updateFilters(); return this; } /** * Sets the vibrato effect of your lavalink player * @param {Object|null} values * @param {number} [values.frequency] Vibrato effect frequency * @param {number} [values.depth] Vibrato effect depth * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setVibrato(values) { this.filters.vibrato = values || null; this.updateFilters(); return this; } /** * Sets the rotation effect of your lavalink player * @param {Object|null} values * @param {number} [values.rotationHz] Rotation effect rotation * @param ShoukakuPlayer * @returns {ShoukakuPlayer} */ setRotation(values) { this.filters.rotation = values || null; this.updateFilters(); return this; } /** * Sets the distortion effect of your lavalink player * @param {Object|null} values * @param {number} [values.sinOffset] Sin offset of the distortion effect * @param {number} [values.sinScale] Sin scale of the distortion effect * @param {number} [values.cosOffset] Cos offset of the distortion effect * @param {number} [values.cosScale] Cos scale of the distortion effect * @param {number} [values.tanOffset] Tan offset of the distortion effect * @param {number} [values.tanScale] Tan scale of the distortion effect * @param {number} [values.offset] Offset of the distortion effect * @param {number} [values.scale] Scale of the distortion effect * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setDistortion(values) { this.filters.distortion = values || null; this.updateFilters(); return this; } /** * Ability to set filters by group instead of 1 by 1 * @param {ShoukakuFilter} [settings] object containing filter settings * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ setFilters(settings) { this.filters = new ShoukakuFilter(settings); this.updateFilters(); return this; } /** * Clears all the filter applied on this player * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} */ clearFilters() { this.filters = new ShoukakuFilter(); this.connection.node.send({ op: 'filters', guildId: this.connection.guildID }); return this; } /** * Tries to resume your player, a use case for this is when you do ShoukakuPlayer.connection.attemptReconnect() * @memberOf ShoukakuPlayer * @returns {ShoukakuPlayer} * @example * ShoukakuPlayer * .connection * .attemptReconnect() * .then(() =&gt; ShoukakuPlayer.resume()); */ resume() { this.updateFilters(); if (this.track) this.playTrack(this.track, { startTime: this.position, pause: this.paused }); this.emit('resumed'); return this; } /** * @memberOf ShoukakuPlayer * @private */ updateFilters() { const { volume, equalizer, karaoke, timescale, tremolo, vibrato, rotation, distortion } = this.filters; this.connection.node.send({ op: 'filters', guildId: this.connection.guildID, volume, equalizer, karaoke, timescale, tremolo, vibrato, rotation, distortion }); } /** * @memberOf ShoukakuPlayer * @protected */ reset() { this.track = null; this.position = 0; this.filters = new ShoukakuFilter(); } /** * @memberOf ShoukakuPlayer * @param {Object} json * @protected */ _onLavalinkMessage(json) { if (json.op === 'playerUpdate') { this.position = json.state.position; this.emit('update', json.state); return; } else if (json.op === 'event') { this._onPlayerEvent(json); return; } this.connection.node.emit('debug', this.connection.node.name, `[Node] -&gt; [${this.connection.node.name}] : Unknown Message OP ${json.op}`); } /** * @memberOf ShoukakuPlayer * @param {Object} json * @protected */ _onPlayerEvent(json) { this.position = 0; switch (json.type) { case 'TrackStartEvent': this.emit('start', json); break; case 'TrackEndEvent': case 'TrackStuckEvent': this.emit('end', json); break; case 'TrackExceptionEvent': this.emit('exception', json); break; case 'WebSocketClosedEvent': if (this.connection.reconnecting) break; wait(this.connection.node.shoukaku.options.closedWebsocketEventDelay).then(() =&gt; { if (!this.connection.moved) { this.emit('closed', json); return; } this.connection.node.emit('debug', this.connection.node.name, `[Node] -&gt; [${this.connection.node.name}] : Voice channel or server move detected`); this.connection.moved = false; }); break; default: this.connection.node.emit('debug', this.connection.node.name, `[Node] -&gt; [${this.connection.node.name}] : Unknown Player Event Type ${json.type}`); } return; } } module.exports = ShoukakuPlayer; × Search results Close "},"src_node_ShoukakuQueue.js.html":{"id":"src_node_ShoukakuQueue.js.html","title":"Source: src/node/ShoukakuQueue.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/node/ShoukakuQueue.js /** * ShoukakuRouter, a queue for websocket messages * @class ShoukakuQueue * @param {ShoukakuSocket} socket The node socket where this queue is attached to */ class ShoukakuQueue { constructor(socket) { /** * The socket where this queue is attached to * @type {ShoukakuSocket} */ this.socket = socket; /** * The message queue of this socket * @type {string[]} */ this.pending = []; } /** * Enqueues a message to be sent on websocket * @param {Object} data Data to be sent to the websocket * @param {boolean} [important=false] If the the message is on top of this queue * @return {void} */ send(data, important = false) { this.pending[important ? 'unshift' : 'push'](JSON.stringify(data)); this.process(); } /** * Process the websocket queue * @return {void} */ process() { if (!this.pending.length || this.socket.ws?.readyState !== 1) return; const message = this.pending.shift(); this.socket.ws.send(message, error =&gt; { if (error) this.socket.emit('error', this.name, error); }); setImmediate(() =&gt; this.process()); } /** * Clears the queued websocket messages to be sent * @return {void} */ clear() { this.pending.length = 0; } } module.exports = ShoukakuQueue; × Search results Close "},"src_node_ShoukakuRest.js.html":{"id":"src_node_ShoukakuRest.js.html","title":"Source: src/node/ShoukakuRest.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/node/ShoukakuRest.js const Petitio = require('petitio'); const ShoukakuRouter = require('./ShoukakuRouter.js'); const ShoukakuTrackList = require('../struct/ShoukakuTrackList.js'); const { searchType } = require('../Utils.js'); const Success = ['TRACK_LOADED', 'PLAYLIST_LOADED', 'SEARCH_RESULT']; /** * ShoukakuRest, provides access to Lavalink REST API * @class ShoukakuRest * @param {Object} node Options that you passed to initialize a lavalink node * @param {Object} options Options of the manager who initialized the node */ class ShoukakuRest { constructor({ url, auth, secure }, { userAgent, timeout }) { /** * The url for this rest api * @type {string} */ this.url = `${secure ? 'https' : 'http'}://${url}`; /** * The timeout before a request will be cancelled * @type {number} */ this.timeout = timeout || 15000; Object.defineProperty(this, 'auth', { value: auth }); Object.defineProperty(this, 'userAgent', { value: userAgent }); } /** * The api router for this rest api * @type {number} * @memberof ShoukakuRest * @private */ get router() { return new ShoukakuRouter(this); } /** * Resolves a identifier into a lavalink track * @param {string} identifier Anything you want for lavalink to search for * @param {string} [search=null] Either `youtube` or `soundcloud` or `youtubemusic`. If specified, resolve will return search results * @memberof ShoukakuRest * @returns {Promise&lt;void|ShoukakuTrackList&gt;} */ async resolve(identifier, search = null) { if (!identifier) throw new Error('Identifier cannot be null'); if (search) identifier = `${searchType(search)}:${identifier}`; const data = await this.router.loadtracks({ identifier }).get(); if (!Success.includes(data.loadType)) return; return new ShoukakuTrackList(data); } /** * Decodes the given base64 encoded track from lavalink * @param {string} track Base64 Encoded Track you got from the lavalink api * @memberof ShoukakuRest * @returns {Promise&lt;Object&gt;} */ decode(track) { if (!track) throw new Error('Track cannot be null'); return this.router.decodetrack({ track }).get(); } /** * Gets the status of the \"RoutePlanner API\" for this lavalink node * @memberof ShoukakuRest * @returns {Promise&lt;Object&gt;} Refer to `https://github.com/freyacodes/Lavalink/blob/master/IMPLEMENTATION.md#routeplanner-api` */ getRoutePlannerStatus() { return this.router.routeplanner.status.get(); } /** * Unmarks a failed ip in the \"RoutePlanner API\" on this lavalink node * @param {string} address The IP you want to unmark as failed * @memberof ShoukakuRest * @returns {Promise&lt;void&gt;} */ unmarkFailedAddress(address) { if (!address) throw new Error('Address cannot be null'); return this.router.routeplanner.free.address.post({ body: { address } }); } /** * Unmarks all the failed ip(s) in the \"RoutePlanner API\" on this lavalink node * @memberof ShoukakuRest * @returns {Promise&lt;void&gt;} */ unmarkAllFailedAddress() { return this.router.routeplanner.free.all.post(); } /** * Queries the rest api * @param {string} url The request url * @param {Object} options The request options * @memberof ShoukakuRest * @protected */ async fetch(url, { method, options }) { const headers = { 'Authorization': this.auth, 'User-Agent': this.userAgent }; if (method === 'post') headers['Content-Type'] = 'application/json'; const request = await Petitio(url) .method(method.toUpperCase()) .header(headers) .body(options?.body ?? null) .timeout(this.timeout) .send(); if (request.status &gt;= 200 &amp;&amp; request.statusCode &lt; 300) throw new Error(`Rest request failed with response code: ${request.statusCode}`); const body = request.body.toString('utf8'); if (!body?.length) return; return JSON.parse(body); } } module.exports = ShoukakuRest; × Search results Close "},"src_node_ShoukakuRouter.js.html":{"id":"src_node_ShoukakuRouter.js.html","title":"Source: src/node/ShoukakuRouter.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/node/ShoukakuRouter.js 'use strict'; const noop = () =&gt; {}; // eslint-disable-line no-empty-function const methods = ['get', 'post', 'delete', 'patch', 'put']; const reflectors = [ 'toString', 'valueOf', 'inspect', 'constructor', Symbol.toPrimitive, Symbol.for('nodejs.util.inspect.custom'), ]; /** * ShoukakuRouter, generates an api route for the rest manager * @class ShoukakuRouter * @param {ShoukakuRest} rest The rest manager that initialized this * @returns {Proxy|Object|string|void} * @protected */ function ShoukakuRouter(rest) { let query; const route = ['']; const handler = { get(_, name) { if (reflectors.includes(name)) return () =&gt; route.join('/'); if (methods.includes(name)) return options =&gt; rest.fetch(`${rest.url}${route.join('/')}${query ? `?${new URLSearchParams(query)}` : ''}`, { method: name, options }); route.push(name); return new Proxy(noop, handler); }, apply(_, __, args) { query = [...args.filter(x =&gt; x != null)].shift(); // eslint-disable-line eqeqeq return new Proxy(noop, handler); }, }; return new Proxy(noop, handler); } module.exports = ShoukakuRouter; × Search results Close "},"src_node_ShoukakuSocket.js.html":{"id":"src_node_ShoukakuSocket.js.html","title":"Source: src/node/ShoukakuSocket.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/node/ShoukakuSocket.js const EventEmitter = require('events'); const Websocket = require('ws'); const ShoukakuQueue = require('./ShoukakuQueue.js'); const ShoukakuRest = require('./ShoukakuRest.js'); const ShoukakuPlayer = require('../guild/ShoukakuPlayer.js'); const ShoukakuStats = require('../struct/ShoukakuStats.js'); const { state } = require('../Constants.js'); /** * ShoukakuSocket, manages a single lavalink node connection * @class ShoukakuSocket * @extends {EventEmitter} * @param {Shoukaku} shoukaku The manager that initialized this instance * @param {Object} options The node options to connect * @param {string} options.name Lavalink node name * @param {string} options.url Lavalink node url without prefix like, ex: http:// * @param {string} options.auth Lavalink node password * @param {boolean} [options.secure=false] Whether this node should be in secure wss or https mode * @param {string} [options.group=undefined] Lavalink node group */ class ShoukakuSocket extends EventEmitter { constructor(shoukaku, options) { super(); /** * The manager instance of this socket * @type {Shoukaku} */ this.shoukaku = shoukaku; /** * The players being governed by this node * @type {Map&lt;string, ShoukakuPlayer&gt;} */ this.players = new Map(); /** * The rest api for this socket * @type {ShoukakuRest} */ this.rest = new ShoukakuRest(options, shoukaku.options); /** * List of queued websocket reqeusts * @type {ShoukakuQueue} */ this.queue = new ShoukakuQueue(this); /** * The state of this socket * @type {Constants.state} */ this.state = state.DISCONNECTED; /** * The stats of this socket * @type {ShoukakuStats} */ this.stats = new ShoukakuStats(); /** * Attempted reconnects of this socket. Resets to 0 when the socket opens properly * @type {number} */ this.reconnects = 0; /** * Name of this socket * @type {string} */ this.name = options.name; /** * Group of this socket * @type {?string} */ this.group = options.group; /** * Websocket URL of this socket * @type {string} */ this.url = `${options.secure ? 'wss' : 'ws'}://${options.url}`; /** * If this socket was resumed * @type {boolean} */ this.resumed = false; /** * If this node is destroyed and must not reconnect * @type {boolean} */ this.destroyed = false; Object.defineProperty(this, 'auth', { value: options.auth }); } /** * @type {string} * @memberof ShoukakuSocket * @private */ get userAgent() { return this.shoukaku.options.userAgent; } /** * @type {boolean} * @memberof ShoukakuSocket * @private */ get resumable() { return this.shoukaku.options.resumable; } /** * @type {number} * @memberof ShoukakuSocket * @private */ get resumableTimeout() { return this.shoukaku.options.resumableTimeout; } /** * @type {boolean} * @memberof ShoukakuSocket * @private */ get moveOnDisconnect() { return this.shoukaku.options.moveOnDisconnect; } /** * @type {number} * @memberof ShoukakuSocket * @private */ get reconnectTries() { return this.shoukaku.options.reconnectTries; } /** * @type {number} * @memberof ShoukakuSocket * @private */ get reconnectInterval() { return this.shoukaku.options.reconnectInterval; } /** * Penalties of this socket. The higher the return number, the more loaded the server is * @type {number} * @memberof ShoukakuSocket */ get penalties() { let penalties = 0; penalties += this.stats.players; penalties += Math.round(Math.pow(1.05, 100 * this.stats.cpu.systemLoad) * 10 - 10); if (this.stats.frameStats) { penalties += this.stats.frameStats.deficit; penalties += this.stats.frameStats.nulled * 2; } return penalties; } /** * Connects this socket * @memberof ShoukakuSocket * @param {boolean} [reconnect=false] * @returns {void} * @protected */ connect(reconnect = false) { this.destroyed = false; this.state = state.CONNECTING; const headers = { 'Client-Name': this.userAgent, 'User-Agent': this.userAgent, 'Authorization': this.auth, 'User-Id': this.shoukaku.id }; if (reconnect) headers['Resume-Key'] = (!!this.resumable).toString(); this.emit('debug', this.name, `[Socket] -&gt; [${this.name}] : Connecting ${this.url}`); this.ws = new Websocket(this.url, { headers }); this.ws.once('upgrade', response =&gt; this.resumed = response.headers['session-resumed'] === 'true'); this.ws.once('open', () =&gt; this._open()); this.ws.once('close', (...args) =&gt; this._close(...args)); this.ws.on('error', error =&gt; this.emit('error', this.name, error)); this.ws.on('message', (...args) =&gt; this._message(...args)); } /** * Disconnects this socket * @memberof ShoukakuSocket * @param {number} [code=1000] * @param {string} [reason] * @returns {void} * @protected */ disconnect(code = 1000, reason) { this.destroyed = true; this._clean(); this._disconnect(code, reason); } /** * Creates a player and connects your bot to the specified guild's voice channel * @param {Object} options Join channel options * @param {string} options.guildID GuildID where the voice channel you want to join is in * @param {string} options.channelID ChannelID of the voice channel where you want to join in * @param {boolean} [options.mute=false] If you want to join this channel muted already * @param {boolean} [options.deaf=false] If you want to join this channel deafened already * @memberof ShoukakuSocket * @returns {Promise&lt;ShoukakuPlayer&gt;} * @example * async function BurningLove() { * const node = Shoukaku.getNode(); * const list = await node.rest.resolve('Kongou Burning Love', 'youtube'); * const player = await node.joinChannel({ guildID: 'guild_id', voiceChannelID: 'voice_channel_id' }); * player.playTrack(list.tracks.shift()); * } * BurningLove(); */ async joinChannel(options = {}) { if (!options.guildID || !options.channelID) throw new Error('Supplied options needs to have \"guildID\" and \"channelID\" ids'); if (this.state !== state.CONNECTED) throw new Error('This node is not yet ready'); const guild = this.shoukaku.client.guilds.cache.get(options.guildID); if (!guild) throw new Error('Guild not found, cannot continue creating this connection'); const player = this.players.get(guild.id) || new ShoukakuPlayer(this, guild); try { if (!this.players.has(guild.id)) this.players.set(guild.id, player); await player.connection.connect(options); return player; } catch (error) { this.players.delete(guild.id); throw error; } } /** * Disconnects and cleans a player in this socket * @param {string} guildID The guild id of the player you want to remove. * @memberOf ShoukakuSocket * @returns {void} */ leaveChannel(guildID) { return this.players.get(guildID)?.connection.disconnect(); } /** * Shortcut to send a message to this websocket * @param {Object} data Message to be sent * @param {imporant} [data=false] If the message should be on top of queue * @memberOf ShoukakuSocket * @returns {void} */ send(data, important = false) { return this.queue.send(data, important); } /** * @memberOf ShoukakuSocket * @returns {void} * @private */ _open() { if (this.resumable) { this.send({ op: 'configureResuming', key: (!!this.resumable).toString(), timeout: this.resumableTimeout }); } this.reconnects = 0; this.state = state.CONNECTED; this.emit('debug', this.name, `[Socket] &lt;-&gt; [${this.name}] : Connection Open ${this.url} | Resumed: ${this.resumed}`); this.emit('ready', this.name, this.resumed); } /** * @memberOf ShoukakuSocket * @param {string} message * @returns {void} * @private */ _message(message) { const json = JSON.parse(message); this.emit('debug', this.name, `[Socket] &lt;- [${this.name}] : Websocket Message, OP: ${json?.op || 'Unknown'}`); if (!json) return; if (json.op === 'stats') { this.stats = new ShoukakuStats(json); return; } this.players.get(json.guildId)?._onLavalinkMessage(json); } /** * @memberOf ShoukakuSocket * @param {number} code * @param {string} reason * @returns {void} * @private */ _close(code, reason) { this.emit('debug', this.name, `[Socket] &lt;-/-&gt; [${this.name}] : Connection Closed, Code: ${code || 'Unknown Code'}`); this.ws.removeAllListeners(); this.ws = null; this.state = state.DISCONNECTED; this.emit('close', this.name, code, reason); if (this.destroyed || this.reconnects &gt; this.reconnectTries) return this._clean(); this._reconnect(); } /** * @memberOf ShoukakuSocket * @param {Object} packet * @returns {void} * @protected */ _clientRaw(packet) { const player = this.players.get(packet.d.guild_id); if (!player) return; if (packet.t === 'VOICE_SERVER_UPDATE') { player.connection.setServerUpdate(packet.d); return; } if (packet.d.user_id !== this.shoukaku.id) return; player.connection.setStateUpdate(packet.d); } /** * @memberOf ShoukakuSocket * @returns {void} * @protected */ _clean() { if (this.resumed) return; const players = [...this.players.values()]; if (this.moveOnDisconnect &amp;&amp; this.shoukaku.nodes.size &gt; 0) { for (const player of players) player.moveNode(this.shoukaku._getIdeal(this.group)); return; } const error = new Error( this.moveOnDisconnect ? `Node '${this.name}' disconnected; moveOnReconnect is disabled` : `Node '${this.name}' disconnected; No nodes to reconnect to` ); for (const player of players) player.connection.disconnect(); this.emit('disconnect', this.name, players, error); } /** * @memberOf ShoukakuSocket * @returns {void} * @private */ _reconnect() { if (this.state !== state.DISCONNECTED) return; this.reconnects++; this.emit('debug', this.name, `[Socket] -&gt; [${this.name}] : Reconnecting. ${this.reconnectTries - this.reconnects} tries left`); setTimeout(() =&gt; this.connect(), this.reconnectInterval); } /** * @memberOf ShoukakuSocket * @param {number} code * @param {string} reason * @returns {void} * @private */ _disconnect(code, reason) { if (this.queue.pending.length) { setImmediate(() =&gt; this._disconnect()); return; } this.ws?.close(code, reason); } } module.exports = ShoukakuSocket; × Search results Close "},"src_Shoukaku.js.html":{"id":"src_Shoukaku.js.html","title":"Source: src/Shoukaku.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/Shoukaku.js const EventEmitter = require('events'); const ShoukakuSocket = require('./node/ShoukakuSocket.js'); const { shoukakuOptions, nodeOptions, state } = require('./Constants.js'); const { mergeDefault, getVersion } = require('./Utils.js'); /** * Shoukaku, governs the client's lavalink node connections. * @class Shoukaku * @extends {EventEmitter} * @param {Client} client Your Discord.JS initalized client * @param {Object[]} nodes Array of Lavalink nodes to initially connect to * @param {string} nodes.name Lavalink node name * @param {string} nodes.url Lavalink node url without prefix like, ex: http:// * @param {string} nodes.auth Lavalink node password * @param {boolean} [nodes.secure=false] Whether this node should be in secure wss or https mode * @param {string} [nodes.group=undefined] Lavalink node group * @param {Object} [options={}] Options to initalize this instance * @param {boolean} [options.resumable=false] If you want your node to support resuming * @param {number} [options.resumableTimeout=30] Timeout when Lavalink will decide a player isn't resumed and will destroy the connection to it, measured in seconds * @param {number} [options.reconnectTries=2] Amount of tries to connect to the Lavalink node before it decides that the node is unreconnectable * @param {boolean} [options.moveOnDisconnect=false] Specifies if the library will attempt to reconnect players on a disconnected node to another node * @param {number} [options.restTimeout=15000] Timeout on rest requests to your lavalink node, measured in milliseconds * @param {number} [options.reconnectInterval=5000] Timeout between reconnect attempts, measured in milliseconds * @param {number} [options.closedWebsocketEventDelay=500] Timeout before shoukaku processes a websocket closed event, measured in milliseconds * @param {string} [options.userAgent=\"name/version (+url)\"] User-Agent to use on connecting to WS and REST requests */ class Shoukaku extends EventEmitter { constructor(client, nodes, options) { super(); const { variant, version } = getVersion(); if (variant === 'light') { if (!version.startsWith('3')) throw new Error('Shoukaku will only work at Discord.JS-light v3. Versions below Discord.JS-light v3 is not supported'); } else { if (!version.startsWith('12')) throw new Error('Shoukaku will only work at Discord.JS v12. Versions below Discord.JS v12 is not supported'); } if (!nodes?.length) throw new Error('No nodes supplied'); /** * The instance of Discord.JS client * @type {Client} */ this.client = client; /** * The user id of the bot that is being governed * @type {?string} */ this.id = null; /** * The current nodes that is being handled * @type {Map&lt;string, ShoukakuSocket&gt;} */ this.nodes = new Map(); Object.defineProperty(this, 'options', { value: mergeDefault(shoukakuOptions, options) }); this.client.once('ready', () =&gt; this._clientReady(nodes)); this.client.on('raw', event =&gt; this._clientRaw(event)); } /** * Gets all the Players that is currently active on all nodes in this instance. * @type {Map&lt;string, ShoukakuPlayer&gt;} * @memberof Shoukaku */ get players() { const players = new Map(); for (const node of this.nodes.values()) { for (const [id, player] of node.players) players.set(id, player); } return players; } /** * Debug related things * @event Shoukaku#debug * @param {string} name The name of the node that sent the debug info * @param {string} info The debug info * @memberof Shoukaku */ /** * Emitted when a node ecountered an internal error * @event Shoukaku#error * @param {string} name The node name that errored * @param {Error} error The error object * @memberof Shoukaku * @example * Shoukaku.on('error', console.error); */ /** * Emitted when a node becomes ready * @event Shoukaku#ready * @param {string} name The node that sent the ready event * @param {boolean} reconnect If the node is a reconnected node * @memberof Shoukaku */ /** * Emitted when a node emits a close event * @event Shoukaku#close * @param {string} name The node that sent the ready event * @param {number} code The websocket close code: https://github.com/Luka967/websocket-close-codes * @param {reason} reason The reason for this close event * @memberof Shoukaku */ /** * Emitted when a node will not reconnect again * @event Shoukaku#disconnect * @param {string} name The node that sent the disconnect event * @param {ShoukakuPlayer[]} players The players that is in this disconnected node * @param {error} error The error for this disconnect * @memberof Shoukaku */ /** * Adds a new node to this manager * @param {Object} options The node options to connect * @param {string} options.name Lavalink node name * @param {string} options.url Lavalink node url without prefix like, ex: http:// * @param {string} options.auth Lavalink node password * @param {boolean} [options.secure=false] Whether this node should be in secure wss or https mode * @param {string} [options.group=undefined] Lavalink node group * @memberof Shoukaku * @returns {void} */ addNode(options) { const node = new ShoukakuSocket(this, options); node.on('debug', (...args) =&gt; this.emit('debug', ...args)); node.on('error', (...args) =&gt; this.emit('error', ...args)); node.on('disconnect', (...args) =&gt; this.emit('disconnect', ...args)); node.on('close', (...args) =&gt; this.emit('close', ...args)); node.on('ready', (...args) =&gt; this.emit('ready', ...args)); node.connect(); this.nodes.set(node.name, node); } /** * Removes a node from this manager * @param {string} name The node to remove * @param {string} [reason='Remove node executed'] The reason for disconnect * @memberof Shoukaku * @returns {void} */ removeNode(name, reason = 'Remove node executed') { const node = this.nodes.get(name); if (!node) throw new Error('The node name you specified doesn\\'t exist'); this.nodes.delete(node.name); node.disconnect(1000, reason); node.removeAllListeners(); } /** * Shortcut to get the Ideal Node or a manually specified Node from the current nodes that Shoukaku governs. * @param {string|Array&lt;string&gt;} [query] If unspecified, this will return any ideal node, if specified with a string, it will return the node that matches the string, if an array, this will return an ideal node from a group * @memberof Shoukaku * @returns {ShoukakuSocket} * @example * async function BurningLove() { * const node = Shoukaku.getNode(); * const list = await node.rest.resolve('Kongou Burning Love', 'youtube'); * const player = await node.joinChannel({ guildID: 'guild_id', voiceChannelID: 'voice_channel_id' }); * player.playTrack(list.tracks.shift()); * } * BurningLove(); */ getNode(query) { if (!this.nodes.size) throw new Error('No nodes available, please add a node first'); if (!query || Array.isArray(query)) return this._getIdeal(query); const node = this.nodes.get(query); if (!node) throw new Error('The node name you specified is not one of my nodes'); if (node.state !== state.CONNECTED) throw new Error('This node is not yet ready'); return node; } /** * @memberOf Shoukaku * @param {string} group * @returns {ShoukakuSocket} * @private */ _getIdeal(group) { const nodes = [...this.nodes.values()] .filter(node =&gt; node.state === state.CONNECTED); if (!group) { return nodes .sort((a, b) =&gt; a.penalties - b.penalties) .shift(); } return nodes .filter(node =&gt; group.includes(node.group)) .sort((a, b) =&gt; a.penalties - b.penalties) .shift(); } /** * @memberOf Shoukaku * @param {Array&lt;Object&gt;} nodes * @returns {void} * @private */ _clientReady(nodes) { this.id = this.client.user.id; this.emit('debug', 'Manager',`[Manager] : Connecting ${nodes.length} nodes`); for (const node of nodes) this.addNode(mergeDefault(nodeOptions, node)); } /** * @memberOf Shoukaku * @param {Object} packet * @returns {void} * @private */ _clientRaw(packet) { if (!['VOICE_STATE_UPDATE', 'VOICE_SERVER_UPDATE'].includes(packet.t)) return; for (const node of this.nodes.values()) node._clientRaw(packet); } } module.exports = Shoukaku; × Search results Close "},"src_struct_ShoukakuFilter.js.html":{"id":"src_struct_ShoukakuFilter.js.html","title":"Source: src/struct/ShoukakuFilter.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/struct/ShoukakuFilter.js /** * Filters available for customization. See https://github.com/freyacodes/Lavalink/blob/dev/IMPLEMENTATION.md#using-filters * @class ShoukakuFilter * @param {Object} [settings={}] Settings to initialize this filter with * @param {Number} [settings.volume=1.0] Volume of this filter * @param {Object[]} [settings.equalizer=[]] Equalizer of this filter * @param {number} settings.equalizer.band Band of the equalizer, can be 0 - 13 * @param {number} settings.equalizer.gain Gain for this band of the equalizer * @param {Object} [settings.karaoke=null] Karaoke configuration of this filter * @param {number} [settings.karaoke.level] Level of the karaoke effect * @param {number} [settings.karaoke.monoLevel] Monolevel of the karaoke effect * @param {number} [settings.karaoke.filterBand] Filterband of the karaoke effect * @param {number} [settings.karaoke.filterWidth] Filterwidth of the karaoke effect * @param {Object} [settings.timescale=null] Timescale configuration of this filter * @param {number} [settings.timescale.speed] Speed of the timescale effect * @param {number} [settings.timescale.pitch] Pitch of the timescale effect * @param {number} [settings.timescale.rate] Rate of the timescale effect * @param {Object} [settings.tremolo=null] Tremolo configuration of this filter * @param {number} [settings.tremolo.frequency] Frequency of the tremolo effect * @param {number} [settings.tremolo.depth] Depth of the tremolo effect * @param {Object} [settings.vibrato=null] Vibrato configuration of this filter * @param {number} [settings.vibrato.frequency] Frequency of the vibrato effect * @param {number} [settings.vibrato.depth] Depth of the vibrato effect * @param {Object} [settings.rotation=null] Rotation configuration of this filter * @param {number} [settings.rotation.rotationHz] Frequency of the rotation effect * @param {Object} [settings.distortion=null] Distortion configuration of this filter * @param {number} [settings.distortion.sinOffset] Sin offset of the distortion effect * @param {number} [settings.distortion.sinScale] Sin scale of the distortion effect * @param {number} [settings.distortion.cosOffset] Cos offset of the distortion effect * @param {number} [settings.distortion.cosScale] Cos scale of the distortion effect * @param {number} [settings.distortion.tanOffset] Tan offset of the distortion effect * @param {number} [settings.distortion.tanScale] Tan scale of the distortion effect * @param {number} [settings.distortion.offset] Offset of the distortion effect * @param {number} [settings.distortion.scale] Scale of the distortion effect */ class ShoukakuFilter { constructor(settings = {}) { /** * The volume of this filter * @type {Number} */ this.volume = settings.volume || 1.0; /** * The equalizer bands set for this filter * @type {Object[]} * @property {number} band Band of the equalizer, can be 0 - 13 * @property {number} gain Gain for this band of the equalizer */ this.equalizer = settings.equalizer || []; /** * The karaoke settings set for this filter * @type {Object|null} * @property {number} [level] Karaoke effect level * @property {number} [monoLevel] Karaoke effect monoLevel * @property {number} [filterBand] Karaoke effect filterband * @property {number} [filterWidth] Karaoke effect filterwidth */ this.karaoke = settings.karaoke || null; /** * The timescale settings set for this filter * @type {Object|null} * @property {number} [speed] Timescale effect speed * @property {number} [pitch] Timescale effect pitch * @property {number} [rate] Timescale effect rate */ this.timescale = settings.timescale || null; /** * The tremolo settings set for this filter * @type {Object|null} * @property {number} [frequency] Tremolo effect frequency * @property {number} [depth] Tremolo effect depth */ this.tremolo = settings.tremolo || null; /** * The vibrato settings set for this filter * @type {Object|null} * @property {number} [frequency] Vibrato effect frequency * @property {number} [depth] Vibrato effect depth */ this.vibrato = settings.vibrato || null; /** * The rotation settings set for this filter * @type {Object|null} * @property {number} [rotationHz] Rotation effect rotation */ this.rotation = settings.rotation || null; /** * The distortion settings set for this filter * @type {Object|null} * @property {number} [sinOffset] Sin offset of the distortion effect * @property {number} [sinScale] Sin scale of the distortion effect * @property {number} [cosOffset] Cos offset of the distortion effect * @property {number} [cosScale] Cos scale of the distortion effect * @property {number} [tanOffset] Tan offset of the distortion effect * @property {number} [tanScale] Tan scale of the distortion effect * @property {number} [offset] Offset of the distortion effect * @property {number} [scale] Scale of the distortion effect */ this.distortion = settings.distortion || null; } } module.exports = ShoukakuFilter; × Search results Close "},"src_struct_ShoukakuStats.js.html":{"id":"src_struct_ShoukakuStats.js.html","title":"Source: src/struct/ShoukakuStats.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/struct/ShoukakuStats.js /** * ShoukakuStats, the current status of a lavalink node * @class ShoukakuStats * @param {Object} status The raw op stats from lavalink */ class ShoukakuStats { constructor(status = {}) { /** * Amount of players currently in this node * @type {number} */ this.players = status.players || 0; /** * Amount of playing players currently in this node * @type {number} */ this.playingPlayers = status.playingPlayers || 0; /** * The memory status of this node * @type {Object} * @property {number} reservable Reservable memory * @property {number} used Used memory * @property {number} free Free memory * @property {number} allocated Allocated memory */ this.memory = status.memory || { reservable: 0, used: 0, free: 0, allocated: 0 }; /** * The frame stats that has been sent by this node to discord voice * @type {Object} * @property {number} sent Number of succesfully sent frames * @property {number} deficit Number of deficit frames * @property {number} nulled Number of nulled freames */ this.frameStats = status.frameStats || { sent: 0, deficit: 0, nulled: 0 }; /** * The cpu stats of the node where this node is * @type {Object} * @property {number} cores Number of cores of the lavalink's server * @property {number} systemLoad The load on which the system takes * @property {number} lavalinkLoad The load on which the lavalink takes */ this.cpu = status.cpu || { cores: 0, systemLoad: 0, lavalinkLoad: 0 }; /** * The current uptime of this node * @type {number} */ this.uptime = status.uptime || 0; } } module.exports = ShoukakuStats; × Search results Close "},"src_struct_ShoukakuTrack.js.html":{"id":"src_struct_ShoukakuTrack.js.html","title":"Source: src/struct/ShoukakuTrack.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/struct/ShoukakuTrack.js /** * Represents a track resolved from lavalink's rest * @class ShoukakuTrack * @param {Object} raw Raw data from lavalink rest */ class ShoukakuTrack { constructor(raw) { /** * Base64 string from the resolved track from lavalink rest * @type {string} */ this.track = raw.track; /** * Info about the track * @type {Object} */ this.info = { /** * Identifier of this track * @type {?string} */ identifier: raw.info.identifier, /** * If this track is seekable * @type {?boolean} */ isSeekable: raw.info.isSeekable, /** * The uploader or author of this track * @type {?string} */ author: raw.info.author, /** * The length of this track in milliseconds * @type {?number} */ length: raw.info.length, /** * If this track is a livestream * @type {?boolean} */ isStream: raw.info.isStream, /** * Start position of this track when played * @type {?number} */ position: raw.info.position, /** * Title of this track * @type {?string} */ title: raw.info.title, /** * URL to this track * @type {?string} */ uri: raw.info.uri }; } } module.exports = ShoukakuTrack; × Search results Close "},"src_struct_ShoukakuTrackList.js.html":{"id":"src_struct_ShoukakuTrackList.js.html","title":"Source: src/struct/ShoukakuTrackList.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: src/struct/ShoukakuTrackList.js const ShoukakuTrack = require('./ShoukakuTrack.js'); const Types = { PLAYLIST_LOADED: 'PLAYLIST', TRACK_LOADED: 'TRACK', SEARCH_RESULT: 'SEARCH' }; /** * Represents a list track resolved from lavalink's rest * @class ShoukakuTrackList * @param {Object} raw Raw data from lavalink rest */ class ShoukakuTrackList { constructor(raw) { /** * Type of this list, can be PLAYLIST, TRACK or SEARCH. PLAYLIST and SEARCH can contain more than one tracks in tracks array while TRACK will contain a single track in the tracks array * @type {string} */ this.type = Types[raw.loadType]; /** * Name of this playlist, defaults to null of the result is not a playlist * @type {?string} */ this.playlistName = this.type === Types.PLAYLIST_LOADED ? raw.playlistInfo.name : null; /** * Selected track in this playlist, defaults to 0 if not a playlist, or if the raw result is equal to -1 * @type {number} */ this.selectedTrack = this.type === Types.PLAYLIST_LOADED &amp;&amp; raw.playlistInfo.selectedTrack !== -1 ? raw.playlistInfo.selectedTrack : 0; /** * An array of tracks from this trackList * @type {ShoukakuTrack[]} */ this.tracks = raw.tracks?.map(d =&gt; new ShoukakuTrack(d)) || []; } } module.exports = ShoukakuTrackList; × Search results Close "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Source: index.js /** * Discord.JS Client * @external Client * @see {@link https://discord.js.org/#/docs/main/master/class/Client} */ /** * Discord.JS Guild * @external Guild * @see {@link https://discord.js.org/#/docs/main/master/class/Guild} */ /** * Node.js Event Emitter * @external EventEmitter * @see {@link https://nodejs.org/api/events.html} */ module.exports = { Shoukaku: require('./src/Shoukaku.js'), Constants: require('./src/Constants.js'), version: require('./package.json').version }; × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Classes Classes Constants ShoukakuConnection ShoukakuPlayer ShoukakuQueue ShoukakuRest ShoukakuRouter ShoukakuSocket Shoukaku ShoukakuFilter ShoukakuStats ShoukakuTrack ShoukakuTrackList Events end Emitted when the lavalink player emits a 'TrackEndEvent' or 'TrackStuckEvent' Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 46 closed Emitted when the lavalink player emits a WebsocketClosedEvent Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 52 Example Player.on('closed', reason =&gt; console.log(reason) &amp;&amp; Player.disconnect()); error Emitted when this library encounters an internal error Parameters: Name Type Description error Error The error encountered. Source: src/guild/ShoukakuPlayer.js, line 60 Example Player.on('error', error =&gt; console.error(error) &amp;&amp; Player.disconnect()); start Emitted when the lavalink player emits a TrackStartEvent Parameters: Name Type Description data Object Source: src/guild/ShoukakuPlayer.js, line 68 exception Emitted when the lavalink player emits a TrackExceptionEvent, automatically fires TrackEndEvent so handling this is optional Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 74 resumed Emitted when this library managed to resumed this player Source: src/guild/ShoukakuPlayer.js, line 80 update Emitted when the lavalink player emits a PlayerUpdate event Parameters: Name Type Description data Object Source: src/guild/ShoukakuPlayer.js, line 85 debug Debug related things Parameters: Name Type Description name string The name of the node that sent the debug info info string The debug info Source: src/Shoukaku.js, line 76 error Emitted when a node ecountered an internal error Parameters: Name Type Description name string The node name that errored error Error The error object Source: src/Shoukaku.js, line 83 Example Shoukaku.on('error', console.error); ready Emitted when a node becomes ready Parameters: Name Type Description name string The node that sent the ready event reconnect boolean If the node is a reconnected node Source: src/Shoukaku.js, line 92 close Emitted when a node emits a close event Parameters: Name Type Description name string The node that sent the ready event code number The websocket close code: https://github.com/Luka967/websocket-close-codes reason reason The reason for this close event Source: src/Shoukaku.js, line 99 disconnect Emitted when a node will not reconnect again Parameters: Name Type Description name string The node that sent the disconnect event players Array.&lt;ShoukakuPlayer&gt; The players that is in this disconnected node error error The error for this disconnect Source: src/Shoukaku.js, line 107 × Search results Close "},"externals.list.html":{"id":"externals.list.html","title":"Externals","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Externals Classes Constants ShoukakuConnection ShoukakuPlayer ShoukakuQueue ShoukakuRest ShoukakuRouter ShoukakuSocket Shoukaku ShoukakuFilter ShoukakuStats ShoukakuTrack ShoukakuTrackList Events end Emitted when the lavalink player emits a 'TrackEndEvent' or 'TrackStuckEvent' Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 46 closed Emitted when the lavalink player emits a WebsocketClosedEvent Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 52 Example Player.on('closed', reason =&gt; console.log(reason) &amp;&amp; Player.disconnect()); error Emitted when this library encounters an internal error Parameters: Name Type Description error Error The error encountered. Source: src/guild/ShoukakuPlayer.js, line 60 Example Player.on('error', error =&gt; console.error(error) &amp;&amp; Player.disconnect()); start Emitted when the lavalink player emits a TrackStartEvent Parameters: Name Type Description data Object Source: src/guild/ShoukakuPlayer.js, line 68 exception Emitted when the lavalink player emits a TrackExceptionEvent, automatically fires TrackEndEvent so handling this is optional Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 74 resumed Emitted when this library managed to resumed this player Source: src/guild/ShoukakuPlayer.js, line 80 update Emitted when the lavalink player emits a PlayerUpdate event Parameters: Name Type Description data Object Source: src/guild/ShoukakuPlayer.js, line 85 debug Debug related things Parameters: Name Type Description name string The name of the node that sent the debug info info string The debug info Source: src/Shoukaku.js, line 76 error Emitted when a node ecountered an internal error Parameters: Name Type Description name string The node name that errored error Error The error object Source: src/Shoukaku.js, line 83 Example Shoukaku.on('error', console.error); ready Emitted when a node becomes ready Parameters: Name Type Description name string The node that sent the ready event reconnect boolean If the node is a reconnected node Source: src/Shoukaku.js, line 92 close Emitted when a node emits a close event Parameters: Name Type Description name string The node that sent the ready event code number The websocket close code: https://github.com/Luka967/websocket-close-codes reason reason The reason for this close event Source: src/Shoukaku.js, line 99 disconnect Emitted when a node will not reconnect again Parameters: Name Type Description name string The node that sent the disconnect event players Array.&lt;ShoukakuPlayer&gt; The players that is in this disconnected node error error The error for this disconnect Source: src/Shoukaku.js, line 107 × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Shoukaku A Lavalink wrapper for Discord.JS v12.x.x The ShipGirl Project, feat Shoukaku; ⓒ Kancolle Features ✅ Straightforward ✅ Stable ✅ Feature-rich ✅ Very cute shipgirl ❤ (Very Important) Installation For Lavalink Master branch with commits no newer than https://github.com/freyacodes/Lavalink/commit/45f8de045fdd75034b75c63c410121d8315e6b75 npm i shoukaku@1.5.2 For Lavalink Dev branch, or anything that doesn't fall into the scope of commits above npm i shoukaku@1.6.x // Replace x with the latest semver patch available If you live on the edge, and want any update available on Shoukaku npm i Deivu/Shoukaku Documentation https://deivu.github.io/Shoukaku/?api Changelogs https://github.com/Deivu/Shoukaku/blob/master/CHANGELOGS.MD Getting Lavalink Download binaries from the CI server or the GitHub releases. Put an application.yml file in your working directory. Run with java -jar Lavalink.jar Docker images are available on the Docker hub. Other Links Support (#Development) | Lavalink Example Bot Implementation: https://github.com/Deivu/Kongou Basic Implementation: const { Client } = require('discord.js'); const { Shoukaku } = require('shoukaku'); const LavalinkServer = [{ name: 'Localhost', host: 'localhost', port: 6969, auth: 'big_weeb' }]; const ShoukakuOptions = { moveOnDisconnect: false, resumable: false, resumableTimeout: 30, reconnectTries: 2, restTimeout: 10000 }; class ExampleBot extends Client { constructor(opts) { super(opts); this.shoukaku = new Shoukaku(this, LavalinkServer, ShoukakuOptions); } login(token) { this._setupShoukakuEvents(); this._setupClientEvents(); return super.login(token); } _setupShoukakuEvents() { this.shoukaku.on('ready', (name) =&gt; console.log(`Lavalink ${name}: Ready!`)); this.shoukaku.on('error', (name, error) =&gt; console.error(`Lavalink ${name}: Error Caught,`, error)); this.shoukaku.on('close', (name, code, reason) =&gt; console.warn(`Lavalink ${name}: Closed, Code ${code}, Reason ${reason || 'No reason'}`)); this.shoukaku.on('disconnected', (name, reason) =&gt; console.warn(`Lavalink ${name}: Disconnected, Reason ${reason || 'No reason'}`)); } _setupClientEvents() { this.on('message', async (msg) =&gt; { if (msg.author.bot || !msg.guild) return; if (!msg.content.startsWith('$play')) return; if (this.shoukaku.getPlayer(msg.guild.id)) return; const args = msg.content.split(' '); if (!args[1]) return; const node = this.shoukaku.getNode(); let data = await node.rest.resolve(args[1]); if (!data) return; const player = await node.joinVoiceChannel({ guildID: msg.guild.id, voiceChannelID: msg.member.voice.channelID }); player.on('error', (error) =&gt; { console.error(error); player.disconnect(); }); for (const event of ['end', 'closed', 'nodeDisconnect']) player.on(event, () =&gt; player.disconnect()); data = data.tracks.shift(); await player.playTrack(data); await msg.channel.send(\"Now Playing: \" + data.info.title); }); this.on('ready', () =&gt; console.log('Bot is now ready')); } } new ExampleBot() .login('token') .catch(console.error); Made with ❤ by @Sāya#0113 × Search results Close "},"Constants.html":{"id":"Constants.html","title":"Class: Constants","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: Constants Constants new Constants() Statics for some constants Source: src/Constants.js, line 3 Members &lt;static&gt; state :number State of nodes or links Type: number Properties: Name Type Default Description CONNECTING number 0 CONNECTED number 1 DISCONNECTING number 2 DISCONNECTED number 3 Source: src/Constants.js, line 13 &lt;static&gt; shoukakuOptions Options that Shoukaku accepts upon initialization Properties: Name Type Argument Default Description resumable boolean &lt;optional&gt; false If you want your node to support resuming resumableTimeout number &lt;optional&gt; 30 Timeout when Lavalink will decide a player isn't resumed and will destroy the connection to it, measured in seconds reconnectTries number &lt;optional&gt; 2 Amount of tries to connect to the lavalink Node before it decides that the node is unreconnectable moveOnDisconnect boolean &lt;optional&gt; false Specifies if the library will attempt to reconnect players on a disconnected node to another node restTimeout number &lt;optional&gt; 15000 Timeout on rest requests to your lavalink node, measured in milliseconds reconnectInterval number &lt;optional&gt; 5000 Timeout between reconnect attempts, measured in milliseconds closedWebsocketEventDelay number &lt;optional&gt; 500 Timeout before shoukaku processes a websocket closed event, measured in milliseconds userAgent string &lt;optional&gt; \"{name}/{ver} ({url})\" User-Agent to use on connecting to WS and REST request Source: src/Constants.js, line 31 &lt;static&gt; nodeOptions Options that Shoukaku needs to initialize a lavalink node Properties: Name Type Argument Default Description name string Your Node Name, anything you want to name your node url string Your node host:port combined, do not put any prefix in this property, ex: 'localhost:2048' auth string The authentication key you set on your lavalink config secure boolean &lt;optional&gt; &lt;nullable&gt; false If you want to use https and wss instead of http and ws group string &lt;optional&gt; &lt;nullable&gt; Group of this node, used for grouping specific nodes Source: src/Constants.js, line 50 × Search results Close "},"ShoukakuConnection.html":{"id":"ShoukakuConnection.html","title":"Class: ShoukakuConnection","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuConnection ShoukakuConnection new ShoukakuConnection(player, node, guild) ShoukakuConnection, manages a voice connection between Discord and Lavalink Parameters: Name Type Description player ShoukakuPlayer The player that initialized this manager node ShoukakuSocket The node where this manager is connected to guild Guild A Discord.JS guild structure Source: src/guild/ShoukakuConnection.js, line 6 Extends EventEmitter Members player :ShoukakuPlayer The player that initialized this manager Type: ShoukakuPlayer Source: src/guild/ShoukakuConnection.js, line 21 node :ShoukakuSocket The node where this manager is connected to Type: ShoukakuSocket Source: src/guild/ShoukakuConnection.js, line 26 guildID :string The ID of the guild where this connection is Type: string Source: src/guild/ShoukakuConnection.js, line 31 &lt;nullable&gt; channelID :string The ID of the channel where this connection is Type: string Source: src/guild/ShoukakuConnection.js, line 36 shardID :number The ID of the shard where this connection is Type: number Source: src/guild/ShoukakuConnection.js, line 41 &lt;nullable&gt; sessionID :string The ID of the current connection session Type: string Source: src/guild/ShoukakuConnection.js, line 46 &lt;nullable&gt; region :string The region where this connection is Type: string Source: src/guild/ShoukakuConnection.js, line 51 muted :boolean If the client user is self muted Type: boolean Source: src/guild/ShoukakuConnection.js, line 56 deafened :boolean If the client user is self deafened Type: boolean Source: src/guild/ShoukakuConnection.js, line 61 state :Constants.state The state of this connection Type: Constants.state Source: src/guild/ShoukakuConnection.js, line 66 moved :boolean If this connection detected a voice channel or voice server change Type: boolean Source: src/guild/ShoukakuConnection.js, line 71 reconnecting :boolean If this connection is trying to force reconnect Type: boolean Source: src/guild/ShoukakuConnection.js, line 76 Methods &lt;async&gt; attemptReconnect( [options]) Attempts to reconnect this connection Parameters: Name Type Argument Description options Object &lt;optional&gt; Properties Name Type Argument Description channelID String &lt;optional&gt; Will throw an error if not specified, when the state of this link is disconnected, no cached serverUpdate or when forceReconnect is true forceReconnect Boolean &lt;optional&gt; Forces a reconnection by re-requesting a connection to Discord, also resets your player Source: src/guild/ShoukakuConnection.js, line 90 Returns: Type Promise.&lt;void&gt; setDeaf( [deaf]) Deafens the client Parameters: Name Type Argument Default Description deaf boolean &lt;optional&gt; false Source: src/guild/ShoukakuConnection.js, line 118 Returns: Type void setMute( [mute]) Mutes the client Parameters: Name Type Argument Default Description mute boolean &lt;optional&gt; false Source: src/guild/ShoukakuConnection.js, line 128 Returns: Type void moveChannel( [channel] [, reason]) Deafens the client Parameters: Name Type Argument Default Description channel string &lt;optional&gt; null channel id of the channel to move to, null if you want to disconnect the client reason string &lt;optional&gt; The reason for this action Source: src/guild/ShoukakuConnection.js, line 139 Returns: Type Promise.&lt;void&gt; disconnect() Disconnects this connection Source: src/guild/ShoukakuConnection.js, line 154 Returns: Type void &lt;async, protected&gt; connect(options) Connects this connection Parameters: Name Type Description options Object options to connect Source: src/guild/ShoukakuConnection.js, line 173 Returns: Type Promise.&lt;void&gt; &lt;protected&gt; setStateUpdate() Parameters: Type Description Object Source: src/guild/ShoukakuConnection.js, line 200 &lt;protected&gt; setServerUpdate(data) Parameters: Name Type Description data Object Source: src/guild/ShoukakuConnection.js, line 215 &lt;protected&gt; send(d [, important]) Parameters: Name Type Argument Default Description d Object important boolean &lt;optional&gt; false Source: src/guild/ShoukakuConnection.js, line 231 × Search results Close "},"ShoukakuPlayer.html":{"id":"ShoukakuPlayer.html","title":"Class: ShoukakuPlayer","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuPlayer ShoukakuPlayer new ShoukakuPlayer(node, guild) ShoukakuPlayer, used to control the player on a guild Parameters: Name Type Description node ShoukakuSocket The node where this class is initialized guild Guild A Discord.JS guild structure Source: src/guild/ShoukakuPlayer.js, line 9 Extends EventEmitter Members connection :ShoukakuConnection The voice connection manager of this player Type: ShoukakuConnection Source: src/guild/ShoukakuPlayer.js, line 23 &lt;nullable&gt; track :string The track that is currently being played by this player Type: string Source: src/guild/ShoukakuPlayer.js, line 28 paused :boolean If this player is currently paused Type: boolean Source: src/guild/ShoukakuPlayer.js, line 33 position :number The current postion in of this player, in milliseconds Type: number Source: src/guild/ShoukakuPlayer.js, line 38 filters :ShoukakuFilter The current filter settings for this player Type: ShoukakuFilter Source: src/guild/ShoukakuPlayer.js, line 43 Methods moveNode(name) Moves this player and connection to another node Parameters: Name Type Description name string Name of the Node you want to move to Source: src/guild/ShoukakuPlayer.js, line 98 Returns: Type ShoukakuPlayer playTrack(track [, options]) Plays a track Parameters: Name Type Argument Default Description track string | ShoukakuTrack The Base64 track from the Lavalink Rest API or a ShoukakuTrack options Object &lt;optional&gt; {} Used if you want to put a custom track start or end time Properties Name Type Argument Default Description noReplace boolean &lt;optional&gt; true Specifies if the player will not replace the current track when executing this action pause boolean &lt;optional&gt; false If true, the player will pause when the track starts playing startTime number &lt;optional&gt; &lt;nullable&gt; In milliseconds on when to start endTime number &lt;optional&gt; &lt;nullable&gt; In milliseconds on when to end Source: src/guild/ShoukakuPlayer.js, line 129 Returns: Type ShoukakuPlayer stopTrack() Stops the player from playing Source: src/guild/ShoukakuPlayer.js, line 153 Returns: Type ShoukakuPlayer setPaused( [pause]) Pauses or unpauses the player from playing Parameters: Name Type Argument Default Description pause boolean &lt;optional&gt; true true to pause, false to unpause Source: src/guild/ShoukakuPlayer.js, line 167 Returns: Type ShoukakuPlayer seekTo(position) Seeks your player to the time you want Parameters: Name Type Description position number Time in milliseconds where you want to seek to Source: src/guild/ShoukakuPlayer.js, line 182 Returns: Type ShoukakuPlayer setVolume(volume) Sets the playback volume of your lavalink player Parameters: Name Type Description volume number The new volume you want to set on the player Source: src/guild/ShoukakuPlayer.js, line 197 Returns: Type ShoukakuPlayer setEqualizer(bands) Sets the equalizer of your lavalink player Parameters: Name Type Description bands Array.&lt;Object&gt; Properties Name Type Description band number Band of the equalizer, can be 0 - 13 gain number Gain for this band of the equalizer Source: src/guild/ShoukakuPlayer.js, line 212 Returns: Type ShoukakuPlayer setKaraoke(values) Sets the karaoke effect of your lavalink player Parameters: Name Type Description values Object | null Properties Name Type Argument Description level number &lt;optional&gt; Karaoke effect level monoLevel number &lt;optional&gt; Karaoke effect monoLevel filterBand number &lt;optional&gt; Karaoke effect filterband filterWidth number &lt;optional&gt; Karaoke effect filterwidth Source: src/guild/ShoukakuPlayer.js, line 228 Returns: Type ShoukakuPlayer setTimescale(values) Sets the timescale effect of your lavalink player Parameters: Name Type Description values Object | null Properties Name Type Argument Description speed number &lt;optional&gt; Timescale effect speed pitch number &lt;optional&gt; Timescale effect pitch rate number &lt;optional&gt; Timescale effect rate Source: src/guild/ShoukakuPlayer.js, line 242 Returns: Type ShoukakuPlayer setTremolo(values) Sets the tremolo effect of your lavalink player Parameters: Name Type Description values Object | null Properties Name Type Argument Description frequency number &lt;optional&gt; Tremolo effect frequency depth number &lt;optional&gt; Tremolo effect depth Source: src/guild/ShoukakuPlayer.js, line 255 Returns: Type ShoukakuPlayer setVibrato(values) Sets the vibrato effect of your lavalink player Parameters: Name Type Description values Object | null Properties Name Type Argument Description frequency number &lt;optional&gt; Vibrato effect frequency depth number &lt;optional&gt; Vibrato effect depth Source: src/guild/ShoukakuPlayer.js, line 268 Returns: Type ShoukakuPlayer setRotation(values, ShoukakuPlayer) Sets the rotation effect of your lavalink player Parameters: Name Type Description values Object | null Properties Name Type Argument Description rotationHz number &lt;optional&gt; Rotation effect rotation ShoukakuPlayer Source: src/guild/ShoukakuPlayer.js, line 280 Returns: Type ShoukakuPlayer setDistortion(values) Sets the distortion effect of your lavalink player Parameters: Name Type Description values Object | null Properties Name Type Argument Description sinOffset number &lt;optional&gt; Sin offset of the distortion effect sinScale number &lt;optional&gt; Sin scale of the distortion effect cosOffset number &lt;optional&gt; Cos offset of the distortion effect cosScale number &lt;optional&gt; Cos scale of the distortion effect tanOffset number &lt;optional&gt; Tan offset of the distortion effect tanScale number &lt;optional&gt; Tan scale of the distortion effect offset number &lt;optional&gt; Offset of the distortion effect scale number &lt;optional&gt; Scale of the distortion effect Source: src/guild/ShoukakuPlayer.js, line 299 Returns: Type ShoukakuPlayer setFilters( [settings]) Ability to set filters by group instead of 1 by 1 Parameters: Name Type Argument Description settings ShoukakuFilter &lt;optional&gt; object containing filter settings Source: src/guild/ShoukakuPlayer.js, line 310 Returns: Type ShoukakuPlayer clearFilters() Clears all the filter applied on this player Source: src/guild/ShoukakuPlayer.js, line 320 Returns: Type ShoukakuPlayer resume() Tries to resume your player, a use case for this is when you do ShoukakuPlayer.connection.attemptReconnect() Source: src/guild/ShoukakuPlayer.js, line 338 Returns: Type ShoukakuPlayer Example ShoukakuPlayer .connection .attemptReconnect() .then(() =&gt; ShoukakuPlayer.resume()); &lt;protected&gt; reset() Source: src/guild/ShoukakuPlayer.js, line 367 &lt;protected&gt; _onLavalinkMessage(json) Parameters: Name Type Description json Object Source: src/guild/ShoukakuPlayer.js, line 377 &lt;protected&gt; _onPlayerEvent(json) Parameters: Name Type Description json Object Source: src/guild/ShoukakuPlayer.js, line 394 Events end Emitted when the lavalink player emits a 'TrackEndEvent' or 'TrackStuckEvent' Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 46 closed Emitted when the lavalink player emits a WebsocketClosedEvent Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 52 Example Player.on('closed', reason =&gt; console.log(reason) &amp;&amp; Player.disconnect()); error Emitted when this library encounters an internal error Parameters: Name Type Description error Error The error encountered. Source: src/guild/ShoukakuPlayer.js, line 60 Example Player.on('error', error =&gt; console.error(error) &amp;&amp; Player.disconnect()); start Emitted when the lavalink player emits a TrackStartEvent Parameters: Name Type Description data Object Source: src/guild/ShoukakuPlayer.js, line 68 exception Emitted when the lavalink player emits a TrackExceptionEvent, automatically fires TrackEndEvent so handling this is optional Parameters: Name Type Description reason Object Source: src/guild/ShoukakuPlayer.js, line 74 resumed Emitted when this library managed to resumed this player Source: src/guild/ShoukakuPlayer.js, line 80 update Emitted when the lavalink player emits a PlayerUpdate event Parameters: Name Type Description data Object Source: src/guild/ShoukakuPlayer.js, line 85 × Search results Close "},"ShoukakuQueue.html":{"id":"ShoukakuQueue.html","title":"Class: ShoukakuQueue","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuQueue ShoukakuQueue new ShoukakuQueue(socket) ShoukakuRouter, a queue for websocket messages Parameters: Name Type Description socket ShoukakuSocket The node socket where this queue is attached to Source: src/node/ShoukakuQueue.js, line 1 Members socket :ShoukakuSocket The socket where this queue is attached to Type: ShoukakuSocket Source: src/node/ShoukakuQueue.js, line 12 pending :Array.&lt;string&gt; The message queue of this socket Type: Array.&lt;string&gt; Source: src/node/ShoukakuQueue.js, line 17 Methods send(data [, important]) Enqueues a message to be sent on websocket Parameters: Name Type Argument Default Description data Object Data to be sent to the websocket important boolean &lt;optional&gt; false If the the message is on top of this queue Source: src/node/ShoukakuQueue.js, line 25 Returns: Type void process() Process the websocket queue Source: src/node/ShoukakuQueue.js, line 33 Returns: Type void clear() Clears the queued websocket messages to be sent Source: src/node/ShoukakuQueue.js, line 45 Returns: Type void × Search results Close "},"ShoukakuRest.html":{"id":"ShoukakuRest.html","title":"Class: ShoukakuRest","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuRest ShoukakuRest new ShoukakuRest(node, options) ShoukakuRest, provides access to Lavalink REST API Parameters: Name Type Description node Object Options that you passed to initialize a lavalink node options Object Options of the manager who initialized the node Source: src/node/ShoukakuRest.js, line 7 Members url :string The url for this rest api Type: string Source: src/node/ShoukakuRest.js, line 19 timeout :number The timeout before a request will be cancelled Type: number Source: src/node/ShoukakuRest.js, line 24 Methods &lt;async&gt; resolve(identifier [, search]) Resolves a identifier into a lavalink track Parameters: Name Type Argument Default Description identifier string Anything you want for lavalink to search for search string &lt;optional&gt; null Either youtube or soundcloud or youtubemusic. If specified, resolve will return search results Source: src/node/ShoukakuRest.js, line 45 Returns: Type Promise.&lt;(void|ShoukakuTrackList)&gt; decode(track) Decodes the given base64 encoded track from lavalink Parameters: Name Type Description track string Base64 Encoded Track you got from the lavalink api Source: src/node/ShoukakuRest.js, line 58 Returns: Type Promise.&lt;Object&gt; getRoutePlannerStatus() Gets the status of the \"RoutePlanner API\" for this lavalink node Source: src/node/ShoukakuRest.js, line 67 Returns: Refer to https://github.com/freyacodes/Lavalink/blob/master/IMPLEMENTATION.md#routeplanner-api Type Promise.&lt;Object&gt; unmarkFailedAddress(address) Unmarks a failed ip in the \"RoutePlanner API\" on this lavalink node Parameters: Name Type Description address string The IP you want to unmark as failed Source: src/node/ShoukakuRest.js, line 76 Returns: Type Promise.&lt;void&gt; unmarkAllFailedAddress() Unmarks all the failed ip(s) in the \"RoutePlanner API\" on this lavalink node Source: src/node/ShoukakuRest.js, line 85 Returns: Type Promise.&lt;void&gt; &lt;async, protected&gt; fetch(url, options) Queries the rest api Parameters: Name Type Description url string The request url options Object The request options Source: src/node/ShoukakuRest.js, line 95 × Search results Close "},"ShoukakuRouter.html":{"id":"ShoukakuRouter.html","title":"Class: ShoukakuRouter","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuRouter ShoukakuRouter &lt;protected&gt; new ShoukakuRouter(rest) ShoukakuRouter, generates an api route for the rest manager Parameters: Name Type Description rest ShoukakuRest The rest manager that initialized this Source: src/node/ShoukakuRouter.js, line 13 Returns: Type Proxy | Object | string | void × Search results Close "},"ShoukakuSocket.html":{"id":"ShoukakuSocket.html","title":"Class: ShoukakuSocket","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuSocket ShoukakuSocket new ShoukakuSocket(shoukaku, options) ShoukakuSocket, manages a single lavalink node connection Parameters: Name Type Description shoukaku Shoukaku The manager that initialized this instance options Object The node options to connect Properties Name Type Argument Default Description name string Lavalink node name url string Lavalink node url without prefix like, ex: http:// auth string Lavalink node password secure boolean &lt;optional&gt; false Whether this node should be in secure wss or https mode group string &lt;optional&gt; Lavalink node group Source: src/node/ShoukakuSocket.js, line 10 Extends EventEmitter Members shoukaku :Shoukaku The manager instance of this socket Type: Shoukaku Source: src/node/ShoukakuSocket.js, line 29 players :Map.&lt;string, ShoukakuPlayer&gt; The players being governed by this node Type: Map.&lt;string, ShoukakuPlayer&gt; Source: src/node/ShoukakuSocket.js, line 34 rest :ShoukakuRest The rest api for this socket Type: ShoukakuRest Source: src/node/ShoukakuSocket.js, line 39 queue :ShoukakuQueue List of queued websocket reqeusts Type: ShoukakuQueue Source: src/node/ShoukakuSocket.js, line 44 state :Constants.state The state of this socket Type: Constants.state Source: src/node/ShoukakuSocket.js, line 49 stats :ShoukakuStats The stats of this socket Type: ShoukakuStats Source: src/node/ShoukakuSocket.js, line 54 reconnects :number Attempted reconnects of this socket. Resets to 0 when the socket opens properly Type: number Source: src/node/ShoukakuSocket.js, line 59 name :string Name of this socket Type: string Source: src/node/ShoukakuSocket.js, line 64 &lt;nullable&gt; group :string Group of this socket Type: string Source: src/node/ShoukakuSocket.js, line 69 url :string Websocket URL of this socket Type: string Source: src/node/ShoukakuSocket.js, line 74 resumed :boolean If this socket was resumed Type: boolean Source: src/node/ShoukakuSocket.js, line 79 destroyed :boolean If this node is destroyed and must not reconnect Type: boolean Source: src/node/ShoukakuSocket.js, line 84 penalties :number Penalties of this socket. The higher the return number, the more loaded the server is Type: number Source: src/node/ShoukakuSocket.js, line 141 Methods &lt;protected&gt; connect( [reconnect]) Connects this socket Parameters: Name Type Argument Default Description reconnect boolean &lt;optional&gt; false Source: src/node/ShoukakuSocket.js, line 159 Returns: Type void &lt;protected&gt; disconnect( [code] [, reason]) Disconnects this socket Parameters: Name Type Argument Default Description code number &lt;optional&gt; 1000 reason string &lt;optional&gt; Source: src/node/ShoukakuSocket.js, line 185 Returns: Type void &lt;async&gt; joinChannel(options) Creates a player and connects your bot to the specified guild's voice channel Parameters: Name Type Description options Object Join channel options Properties Name Type Argument Default Description guildID string GuildID where the voice channel you want to join is in channelID string ChannelID of the voice channel where you want to join in mute boolean &lt;optional&gt; false If you want to join this channel muted already deaf boolean &lt;optional&gt; false If you want to join this channel deafened already Source: src/node/ShoukakuSocket.js, line 208 Returns: Type Promise.&lt;ShoukakuPlayer&gt; Example async function BurningLove() { const node = Shoukaku.getNode(); const list = await node.rest.resolve('Kongou Burning Love', 'youtube'); const player = await node.joinChannel({ guildID: 'guild_id', voiceChannelID: 'voice_channel_id' }); player.playTrack(list.tracks.shift()); } BurningLove(); leaveChannel(guildID) Disconnects and cleans a player in this socket Parameters: Name Type Description guildID string The guild id of the player you want to remove. Source: src/node/ShoukakuSocket.js, line 235 Returns: Type void send(data [, data]) Shortcut to send a message to this websocket Parameters: Name Type Argument Default Description data Object Message to be sent data imporant &lt;optional&gt; false If the message should be on top of queue Source: src/node/ShoukakuSocket.js, line 245 Returns: Type void &lt;protected&gt; _clientRaw(packet) Parameters: Name Type Description packet Object Source: src/node/ShoukakuSocket.js, line 304 Returns: Type void &lt;protected&gt; _clean() Source: src/node/ShoukakuSocket.js, line 319 Returns: Type void × Search results Close "},"Shoukaku.html":{"id":"Shoukaku.html","title":"Class: Shoukaku","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: Shoukaku Shoukaku new Shoukaku(client, nodes [, options]) Shoukaku, governs the client's lavalink node connections. Parameters: Name Type Argument Default Description client Client Your Discord.JS initalized client nodes Array.&lt;Object&gt; Array of Lavalink nodes to initially connect to Properties Name Type Argument Default Description name string Lavalink node name url string Lavalink node url without prefix like, ex: http:// auth string Lavalink node password secure boolean &lt;optional&gt; false Whether this node should be in secure wss or https mode group string &lt;optional&gt; Lavalink node group options Object &lt;optional&gt; {} Options to initalize this instance Properties Name Type Argument Default Description resumable boolean &lt;optional&gt; false If you want your node to support resuming resumableTimeout number &lt;optional&gt; 30 Timeout when Lavalink will decide a player isn't resumed and will destroy the connection to it, measured in seconds reconnectTries number &lt;optional&gt; 2 Amount of tries to connect to the Lavalink node before it decides that the node is unreconnectable moveOnDisconnect boolean &lt;optional&gt; false Specifies if the library will attempt to reconnect players on a disconnected node to another node restTimeout number &lt;optional&gt; 15000 Timeout on rest requests to your lavalink node, measured in milliseconds reconnectInterval number &lt;optional&gt; 5000 Timeout between reconnect attempts, measured in milliseconds closedWebsocketEventDelay number &lt;optional&gt; 500 Timeout before shoukaku processes a websocket closed event, measured in milliseconds userAgent string &lt;optional&gt; \"name/version (+url)\" User-Agent to use on connecting to WS and REST requests Source: src/Shoukaku.js, line 7 Extends EventEmitter Members client :Client The instance of Discord.JS client Type: Client Source: src/Shoukaku.js, line 45 &lt;nullable&gt; id :string The user id of the bot that is being governed Type: string Source: src/Shoukaku.js, line 50 nodes :Map.&lt;string, ShoukakuSocket&gt; The current nodes that is being handled Type: Map.&lt;string, ShoukakuSocket&gt; Source: src/Shoukaku.js, line 55 players :Map.&lt;string, ShoukakuPlayer&gt; Gets all the Players that is currently active on all nodes in this instance. Type: Map.&lt;string, ShoukakuPlayer&gt; Source: src/Shoukaku.js, line 68 Methods addNode(options) Adds a new node to this manager Parameters: Name Type Description options Object The node options to connect Properties Name Type Argument Default Description name string Lavalink node name url string Lavalink node url without prefix like, ex: http:// auth string Lavalink node password secure boolean &lt;optional&gt; false Whether this node should be in secure wss or https mode group string &lt;optional&gt; Lavalink node group Source: src/Shoukaku.js, line 127 Returns: Type void removeNode(name [, reason]) Removes a node from this manager Parameters: Name Type Argument Default Description name string The node to remove reason string &lt;optional&gt; 'Remove node executed' The reason for disconnect Source: src/Shoukaku.js, line 144 Returns: Type void getNode( [query]) Shortcut to get the Ideal Node or a manually specified Node from the current nodes that Shoukaku governs. Parameters: Name Type Argument Description query string | Array.&lt;string&gt; &lt;optional&gt; If unspecified, this will return any ideal node, if specified with a string, it will return the node that matches the string, if an array, this will return an ideal node from a group Source: src/Shoukaku.js, line 165 Returns: Type ShoukakuSocket Example async function BurningLove() { const node = Shoukaku.getNode(); const list = await node.rest.resolve('Kongou Burning Love', 'youtube'); const player = await node.joinChannel({ guildID: 'guild_id', voiceChannelID: 'voice_channel_id' }); player.playTrack(list.tracks.shift()); } BurningLove(); Events debug Debug related things Parameters: Name Type Description name string The name of the node that sent the debug info info string The debug info Source: src/Shoukaku.js, line 76 error Emitted when a node ecountered an internal error Parameters: Name Type Description name string The node name that errored error Error The error object Source: src/Shoukaku.js, line 83 Example Shoukaku.on('error', console.error); ready Emitted when a node becomes ready Parameters: Name Type Description name string The node that sent the ready event reconnect boolean If the node is a reconnected node Source: src/Shoukaku.js, line 92 close Emitted when a node emits a close event Parameters: Name Type Description name string The node that sent the ready event code number The websocket close code: https://github.com/Luka967/websocket-close-codes reason reason The reason for this close event Source: src/Shoukaku.js, line 99 disconnect Emitted when a node will not reconnect again Parameters: Name Type Description name string The node that sent the disconnect event players Array.&lt;ShoukakuPlayer&gt; The players that is in this disconnected node error error The error for this disconnect Source: src/Shoukaku.js, line 107 × Search results Close "},"ShoukakuFilter.html":{"id":"ShoukakuFilter.html","title":"Class: ShoukakuFilter","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuFilter ShoukakuFilter new ShoukakuFilter( [settings]) Filters available for customization. See https://github.com/freyacodes/Lavalink/blob/dev/IMPLEMENTATION.md#using-filters Parameters: Name Type Argument Default Description settings Object &lt;optional&gt; {} Settings to initialize this filter with Properties Name Type Argument Default Description volume Number &lt;optional&gt; 1.0 Volume of this filter equalizer Array.&lt;Object&gt; &lt;optional&gt; [] Equalizer of this filter Properties Name Type Description band number Band of the equalizer, can be 0 - 13 gain number Gain for this band of the equalizer karaoke Object &lt;optional&gt; null Karaoke configuration of this filter Properties Name Type Argument Description level number &lt;optional&gt; Level of the karaoke effect monoLevel number &lt;optional&gt; Monolevel of the karaoke effect filterBand number &lt;optional&gt; Filterband of the karaoke effect filterWidth number &lt;optional&gt; Filterwidth of the karaoke effect timescale Object &lt;optional&gt; null Timescale configuration of this filter Properties Name Type Argument Description speed number &lt;optional&gt; Speed of the timescale effect pitch number &lt;optional&gt; Pitch of the timescale effect rate number &lt;optional&gt; Rate of the timescale effect tremolo Object &lt;optional&gt; null Tremolo configuration of this filter Properties Name Type Argument Description frequency number &lt;optional&gt; Frequency of the tremolo effect depth number &lt;optional&gt; Depth of the tremolo effect vibrato Object &lt;optional&gt; null Vibrato configuration of this filter Properties Name Type Argument Description frequency number &lt;optional&gt; Frequency of the vibrato effect depth number &lt;optional&gt; Depth of the vibrato effect rotation Object &lt;optional&gt; null Rotation configuration of this filter Properties Name Type Argument Description rotationHz number &lt;optional&gt; Frequency of the rotation effect distortion Object &lt;optional&gt; null Distortion configuration of this filter Properties Name Type Argument Description sinOffset number &lt;optional&gt; Sin offset of the distortion effect sinScale number &lt;optional&gt; Sin scale of the distortion effect cosOffset number &lt;optional&gt; Cos offset of the distortion effect cosScale number &lt;optional&gt; Cos scale of the distortion effect tanOffset number &lt;optional&gt; Tan offset of the distortion effect tanScale number &lt;optional&gt; Tan scale of the distortion effect offset number &lt;optional&gt; Offset of the distortion effect scale number &lt;optional&gt; Scale of the distortion effect Source: src/struct/ShoukakuFilter.js, line 1 Members volume :Number The volume of this filter Type: Number Source: src/struct/ShoukakuFilter.js, line 42 equalizer :Array.&lt;Object&gt; The equalizer bands set for this filter Type: Array.&lt;Object&gt; Properties: Name Type Description band number Band of the equalizer, can be 0 - 13 gain number Gain for this band of the equalizer Source: src/struct/ShoukakuFilter.js, line 49 karaoke :Object|null The karaoke settings set for this filter Type: Object | null Properties: Name Type Argument Description level number &lt;optional&gt; Karaoke effect level monoLevel number &lt;optional&gt; Karaoke effect monoLevel filterBand number &lt;optional&gt; Karaoke effect filterband filterWidth number &lt;optional&gt; Karaoke effect filterwidth Source: src/struct/ShoukakuFilter.js, line 58 timescale :Object|null The timescale settings set for this filter Type: Object | null Properties: Name Type Argument Description speed number &lt;optional&gt; Timescale effect speed pitch number &lt;optional&gt; Timescale effect pitch rate number &lt;optional&gt; Timescale effect rate Source: src/struct/ShoukakuFilter.js, line 66 tremolo :Object|null The tremolo settings set for this filter Type: Object | null Properties: Name Type Argument Description frequency number &lt;optional&gt; Tremolo effect frequency depth number &lt;optional&gt; Tremolo effect depth Source: src/struct/ShoukakuFilter.js, line 73 vibrato :Object|null The vibrato settings set for this filter Type: Object | null Properties: Name Type Argument Description frequency number &lt;optional&gt; Vibrato effect frequency depth number &lt;optional&gt; Vibrato effect depth Source: src/struct/ShoukakuFilter.js, line 80 rotation :Object|null The rotation settings set for this filter Type: Object | null Properties: Name Type Argument Description rotationHz number &lt;optional&gt; Rotation effect rotation Source: src/struct/ShoukakuFilter.js, line 86 distortion :Object|null The distortion settings set for this filter Type: Object | null Properties: Name Type Argument Description sinOffset number &lt;optional&gt; Sin offset of the distortion effect sinScale number &lt;optional&gt; Sin scale of the distortion effect cosOffset number &lt;optional&gt; Cos offset of the distortion effect cosScale number &lt;optional&gt; Cos scale of the distortion effect tanOffset number &lt;optional&gt; Tan offset of the distortion effect tanScale number &lt;optional&gt; Tan scale of the distortion effect offset number &lt;optional&gt; Offset of the distortion effect scale number &lt;optional&gt; Scale of the distortion effect Source: src/struct/ShoukakuFilter.js, line 99 × Search results Close "},"ShoukakuStats.html":{"id":"ShoukakuStats.html","title":"Class: ShoukakuStats","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuStats ShoukakuStats new ShoukakuStats(status) ShoukakuStats, the current status of a lavalink node Parameters: Name Type Description status Object The raw op stats from lavalink Source: src/struct/ShoukakuStats.js, line 1 Members players :number Amount of players currently in this node Type: number Source: src/struct/ShoukakuStats.js, line 12 playingPlayers :number Amount of playing players currently in this node Type: number Source: src/struct/ShoukakuStats.js, line 17 memory :Object The memory status of this node Type: Object Properties: Name Type Description reservable number Reservable memory used number Used memory free number Free memory allocated number Allocated memory Source: src/struct/ShoukakuStats.js, line 26 frameStats :Object The frame stats that has been sent by this node to discord voice Type: Object Properties: Name Type Description sent number Number of succesfully sent frames deficit number Number of deficit frames nulled number Number of nulled freames Source: src/struct/ShoukakuStats.js, line 39 cpu :Object The cpu stats of the node where this node is Type: Object Properties: Name Type Description cores number Number of cores of the lavalink's server systemLoad number The load on which the system takes lavalinkLoad number The load on which the lavalink takes Source: src/struct/ShoukakuStats.js, line 51 uptime :number The current uptime of this node Type: number Source: src/struct/ShoukakuStats.js, line 60 × Search results Close "},"ShoukakuTrack.html":{"id":"ShoukakuTrack.html","title":"Class: ShoukakuTrack","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuTrack ShoukakuTrack new ShoukakuTrack(raw) Represents a track resolved from lavalink's rest Parameters: Name Type Description raw Object Raw data from lavalink rest Source: src/struct/ShoukakuTrack.js, line 1 Members track :string Base64 string from the resolved track from lavalink rest Type: string Source: src/struct/ShoukakuTrack.js, line 12 info :Object Info about the track Type: Object Source: src/struct/ShoukakuTrack.js, line 17 × Search results Close "},"ShoukakuTrackList.html":{"id":"ShoukakuTrackList.html","title":"Class: ShoukakuTrackList","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter Class: ShoukakuTrackList ShoukakuTrackList new ShoukakuTrackList(raw) Represents a list track resolved from lavalink's rest Parameters: Name Type Description raw Object Raw data from lavalink rest Source: src/struct/ShoukakuTrackList.js, line 3 Members type :string Type of this list, can be PLAYLIST, TRACK or SEARCH. PLAYLIST and SEARCH can contain more than one tracks in tracks array while TRACK will contain a single track in the tracks array Type: string Source: src/struct/ShoukakuTrackList.js, line 14 &lt;nullable&gt; playlistName :string Name of this playlist, defaults to null of the result is not a playlist Type: string Source: src/struct/ShoukakuTrackList.js, line 19 selectedTrack :number Selected track in this playlist, defaults to 0 if not a playlist, or if the raw result is equal to -1 Type: number Source: src/struct/ShoukakuTrackList.js, line 24 tracks :Array.&lt;ShoukakuTrack&gt; An array of tracks from this trackList Type: Array.&lt;ShoukakuTrack&gt; Source: src/struct/ShoukakuTrackList.js, line 29 × Search results Close "},"external-Client.html":{"id":"external-Client.html","title":"External: Client","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter External: Client Client Discord.JS Client Source: index.js, line 1 See: https://discord.js.org/#/docs/main/master/class/Client × Search results Close "},"external-Guild.html":{"id":"external-Guild.html","title":"External: Guild","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter External: Guild Guild Discord.JS Guild Source: index.js, line 7 See: https://discord.js.org/#/docs/main/master/class/Guild × Search results Close "},"external-EventEmitter.html":{"id":"external-EventEmitter.html","title":"External: EventEmitter","body":" Shoukaku Classes ConstantsShoukakuConnectionShoukakuPlayerShoukakuQueueShoukakuRestShoukakuRouterShoukakuSocketShoukakuShoukakuFilterShoukakuStatsShoukakuTrackShoukakuTrackList Events ShoukakuPlayer#event:endShoukakuPlayer#event:closedShoukakuPlayer#event:errorShoukakuPlayer#event:startShoukakuPlayer#event:exceptionShoukakuPlayer#event:resumedShoukakuPlayer#event:updateShoukaku#event:debugShoukaku#event:errorShoukaku#event:readyShoukaku#event:closeShoukaku#event:disconnect Externals ClientGuildEventEmitter External: EventEmitter EventEmitter Node.js Event Emitter Source: index.js, line 13 See: https://nodejs.org/api/events.html × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
